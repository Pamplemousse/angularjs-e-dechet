angular.module('project', ['mongolab']).
  config(function($routeProvider) {
    $routeProvider.
      when('/', {controller:ListCtrl, templateUrl:'main.html'}).
      when('/garbage/:garbageId', {controller:GarbageCtrl, templateUrl:'garbage.html'}).
      otherwise({redirectTo:'/'});
  });


function GarbageCtrl($scope, $location, $routeParams, Garbage) {
  Garbage.get({id: $routeParams.garbageId}, function(garbage) {
      self.original = garbage;
      $scope.garbage = new Garbage(self.original);
    });

}


function ListCtrl($scope, $location, Garbage) {
  $scope.garbages = Garbage.query();

  $scope.goTo = function(garbageId) {
      $location.path('/garbage/'+garbageId);
  }

  $scope.test = function() {
   // Sortie du script e-dechet.php 
   var dechets = [{"name": "pull", "material": ["laine"], "description": ""}, {"name": "commode", "material": [], "description": ""}, {"name": "batterie téléphone", "material": [], "description": ""}, {"name": "assiette", "material": [], "description": ""}, {"name": "verre a boire", "material": [], "description": ""}, {"name": "canette de soda", "material": [], "description": ""}, {"name": "sac plastique", "material": [], "description": ""}, {"name": "cafetière", "material": [], "description": ""}, {"name": "magazine", "material": [], "description": ""}, {"name": "carton d'emballage", "material": [], "description": ""}, {"name": "pot de peinture", "material": [], "description": ""}, {"name": "roue de vélo", "material": [], "description": ""}, {"name": "bouteille de soda", "material": [], "description": ""}, {"name": "bouteille de lait ", "material": ["plastique"], "description": ""}, {"name": "brique de lait", "material": [], "description": "emballage tetrapack"}, {"name": "pot de yaourt", "material": ["plastique"], "description": ""}, {"name": "pot de yaourt", "material": ["verre"], "description": ""}, {"name": "bouteille de shampoing", "material": [], "description": ""}, {"name": "rasoir jetable", "material": [], "description": ""}, {"name": "bombe déodorant", "material": [], "description": ""}, {"name": "déodorant en stick", "material": [], "description": ""}, {"name": "barquette polystyrène", "material": [], "description": ""}, {"name": "capsule de café", "material": [], "description": ""}, {"name": "pot à épices", "material": ["verre", "plastique"], "description": ""}, {"name": "paquet de cigarette", "material": ["carton", "aluminium", "plastique"], "description": ""}, {"name": "bouteille de sauces", "material": ["plastique"], "description": ""}, {"name": "bouteille de sauces", "material": ["verre"], "description": ""}, {"name": "boîte de conserve", "material": [], "description": ""}, {"name": "prospectus", "material": [], "description": ""}, {"name": "boîte à oeufs", "material": ["plastique"], "description": ""}, {"name": "boîte à oeufs", "material": ["carton"], "description": ""}, {"name": "gobelet", "material": ["plastique"], "description": ""}, {"name": "assiette", "material": ["plastique"], "description": ""}, {"name": "assiette", "material": ["carton"], "description": ""}, {"name": "gobelet", "material": ["carton"], "description": ""}, {"name": "couverts", "material": ["plastique"], "description": ""}, {"name": "brosse à dents", "material": [], "description": ""}, {"name": "paquet de chips", "material": [], "description": ""}, {"name": "jean", "material": [], "description": ""}, {"name": "tee-shirt", "material": ["coton"], "description": ""}, {"name": "chaussures", "material": ["cuir"], "description": ""}, {"name": "chaussettes", "material": [], "description": ""}, {"name": "piles", "material": [], "description": ""}, {"name": "cartouche d'encre", "material": [], "description": ""}, {"name": "ampoule à filament", "material": [], "description": ""}, {"name": "ampoule à économie d'énergie", "material": [], "description": ""}, {"name": "bouteille d'huile", "material": ["verre"], "description": ""}, {"name": "bouteille d'huile", "material": ["plastique"], "description": ""}, {"name": "carton de pizza", "material": [], "description": ""}, {"name": "emballage de fast food", "material": [], "description": ""}, {"name": "ticket de caisse", "material": [], "description": ""}, {"name": "téléphone mobile", "material": [], "description": ""}, {"name": "épluchures de fruits et légumes", "material": [], "description": ""}, {"name": "paire de lunette", "material": [], "description": ""}, {"name": "boîte à biscuits", "material": ["métal"], "description": ""}, {"name": "médicament", "material": [], "description": ""}, {"name": "pot de fleur en plastique", "material": [], "description": ""}, {"name": "CD/ DVD", "material": [], "description": ""}, {"name": "casserole en cuivre", "material": [], "description": ""}, {"name": "casserole en aluminium", "material": [], "description": ""}, {"name": "gant de cuisine", "material": [], "description": ""}, {"name": "boîte de conservation", "material": ["plastique"], "description": " (type Tupperware)"}, {"name": "film plastique", "material": [], "description": "entourant certains magazines ou barquettes de viande"}, {"name": "papier aluminium", "material": ["aluminium"], "description": ""}, {"name": "papier cuisson", "material": [], "description": ""}, {"name": "sac de congélation", "material": [], "description": ""}, {"name": "emballage", "material": ["plastique"], "description": "pour les pâtes, fromage rapé, légumes surgelés..."}, {"name": "batterie automobile", "material": [], "description": ""}, {"name": "huile de friture usagée", "material": [], "description": ""}, {"name": "cubi de vin", "material": [], "description": ""}, {"name": "bac de glace", "material": [], "description": ""}, {"name": "lingette de ménage", "material": [], "description": ""}, {"name": "baril de lessive", "material": ["carton"], "description": ""}, {"name": "bouteille de lessive", "material": ["plastique"], "description": ""}, {"name": "lingette anti-décoloration", "material": [], "description": ""}, {"name": "rouge à lèvre", "material": [], "description": ""}, {"name": "stylo", "material": [], "description": ""}, {"name": "règle", "material": ["plastique"], "description": ""}, {"name": "règle", "material": ["fer"], "description": ""}, {"name": "rapporteur", "material": ["plastique"], "description": ""}, {"name": "équerre", "material": ["fer"], "description": ""}, {"name": "équerre", "material": ["plastique"], "description": ""}, {"name": "tube de colle", "material": [], "description": ""}, {"name": "ballon de football", "material": [], "description": ""}, {"name": "suremballage carton", "material": [], "description": ""}, {"name": "polystyrène", "material": [], "description": ""}, {"name": "agenda", "material": [], "description": ""}, {"name": "calendrier", "material": ["carton"], "description": ""}, {"name": "enveloppe", "material": ["papier"], "description": ""}, {"name": "enveloppe fenêtrée", "material": ["papier", "plastique"], "description": ""}, {"name": "tube de dentifrice", "material": [], "description": ""}, {"name": "peluche", "material": [], "description": ""}, {"name": "bouchon de liège", "material": [], "description": ""}, {"name": "lames de rasoir", "material": [], "description": ""}, {"name": "collant", "material": [], "description": ""}, {"name": "moule en silicone", "material": [], "description": ""}, {"name": "briquet", "material": [], "description": ""}, {"name": "huile de vidange", "material": [], "description": ""}, {"name": "mug", "material": [], "description": ""}, {"name": "souris d'ordinateur", "material": [], "description": ""}, {"name": "pneu", "material": [], "description": ""}, {"name": "sachet de thé", "material": [], "description": ""}, {"name": "serviette en papier", "material": ["papier"], "description": ""}, {"name": "mortier", "material": [], "description": ""}, {"name": "ardoise", "material": [], "description": ""}, {"name": "briques", "material": [], "description": ""}, {"name": "terre", "material": [], "description": ""}, {"name": "béton", "material": [], "description": ""}, {"name": "vitres", "material": [], "description": ""}, {"name": "tonte de gazon", "material": [], "description": ""}, {"name": "branchages", "material": [], "description": ""}, {"name": "feuilles mortes", "material": [], "description": ""}, {"name": "réfrigérateur", "material": [], "description": ""}, {"name": "congélateur", "material": [], "description": ""}, {"name": "écran cathodique", "material": [], "description": ""}, {"name": "bouilloire", "material": [], "description": ""}, {"name": "sèche-cheveux", "material": [], "description": ""}, {"name": "appareil photo", "material": [], "description": ""}, {"name": "perceuse", "material": [], "description": ""}, {"name": "console de jeux", "material": [], "description": ""}, {"name": "micro-onde", "material": [], "description": ""}, {"name": "moniteur", "material": [], "description": "écran d'ordinateur"}, {"name": "aspirateur", "material": [], "description": ""}, {"name": "grille-pain", "material": [], "description": ""}, {"name": "lave-vaisselle", "material": [], "description": ""}, {"name": "climatiseur", "material": [], "description": ""}, {"name": "sèche-linge", "material": [], "description": ""}, {"name": "cuisinière", "material": [], "description": ""}, {"name": "hotte", "material": [], "description": ""}, {"name": "four électrique", "material": [], "description": ""}, {"name": "plaque de cuisson", "material": [], "description": ""}, {"name": "ventilateur", "material": [], "description": ""}, {"name": "ordinateur portable", "material": [], "description": ""}, {"name": "robot ménager", "material": [], "description": ""}, {"name": "transformateur d'alimentation électrique", "material": [], "description": ""}, {"name": "couteau électrique", "material": [], "description": ""}, {"name": "hachoir électrique", "material": [], "description": ""}, {"name": "fer à repasser", "material": [], "description": ""}, {"name": "friteuse électrique", "material": [], "description": ""}, {"name": "grill", "material": [], "description": ""}, {"name": "appareil à raclette", "material": [], "description": ""}, {"name": "rasoir électrique", "material": [], "description": ""}, {"name": "baladeur", "material": [], "description": ""}, {"name": "caméscope", "material": [], "description": ""}, {"name": "chaîne hi-fi", "material": [], "description": ""}, {"name": "enceintes", "material": [], "description": ""}, {"name": "clavier", "material": [], "description": ""}, {"name": "unités centrales d'ordinateur", "material": [], "description": ""}, {"name": "radio-réveil", "material": [], "description": ""}, {"name": "répondeur", "material": [], "description": ""}, {"name": "tablette tactile", "material": [], "description": ""}, {"name": "téléphone fixe", "material": [], "description": ""}, {"name": "jouet télécommandé", "material": [], "description": ""}, {"name": "lampe torche", "material": [], "description": ""}, {"name": "barbecue électrique", "material": [], "description": ""}, {"name": "machine à coudre", "material": [], "description": ""}, {"name": "nettoyeur haute-pression", "material": [], "description": ""}, {"name": "visseuse", "material": [], "description": ""}, {"name": "ponceuse", "material": [], "description": ""}, {"name": "taille-haie", "material": [], "description": ""}, {"name": "tronçonneuse", "material": [], "description": ""}, {"name": "magnétoscope", "material": [], "description": ""}, {"name": "chaudière ", "material": [], "description": ""}, {"name": "box internet", "material": [], "description": ""}, {"name": "radiateur électrique", "material": [], "description": ""}, {"name": "batteur électrique", "material": [], "description": ""}, {"name": "mixeur", "material": [], "description": ""}, {"name": "fer à friser", "material": [], "description": ""}, {"name": "scie circulaire", "material": [], "description": ""}, {"name": "imprimante", "material": [], "description": ""}, {"name": "scie sauteuse", "material": [], "description": ""}, {"name": "tondeuse à gazon", "material": [], "description": ""}];
    for (var i in dechets){
      Garbage.add(dechets[i]);
    }
  }
}


  // $scope.garbages = [
  //   {name:'pull en laine', category:{0:'paper', 1:'plastic', 2:'metal'}, room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name:'commode', category:'paper', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name:'batterie de telephone', category:['paper'], room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'assiette', category:'paper', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'verre a boire', category:'metal', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'canette de soda', category:'paper', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'sac plastique', category:'plastic', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'cafetiere', category:'plastic', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'magazine', category:'paper', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'pot de peinture', category:'metal', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'roue de velo', category:'plastic', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'bouteille de soda', category:'plastic', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'bouteille de lait ', category:'plastic', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'brique de lait', category:'metal', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'pot de yaourt', category:'paper', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'bouteille de shampoing', category:'metal', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'rasoir jetable', category:'plastic', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'bombe deodorant', category:'metal', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'deodorant en stick', category:'metal', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'barquette polystyrene', category:'plastic', room:'kitchen', description:'La description du dechet concerne etc...'},
  //   {name: 'capsule de cafe', category:'metal', room:'kitchen', description:'La description du dechet concerne etc...'}
  // ];